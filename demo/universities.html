<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<title>Universities</title><meta charset="utf-8">
        <script type="text/javascript" src="../js/jquery-1.11.1.min.js"></script>
        <script type="text/javascript" src="../js/d3.v3.min.js" charset="utf-8"></script>
        <script type="text/javascript" src="../keshif.js" charset="utf-8"></script>
        <script type="text/javascript" src="../js/papaparse.min.js" charset="utf-8"></script>
        <link rel="stylesheet" href="../keshif.css"/ type="text/css">
        <link rel="stylesheet" href="../font-awesome/css/font-awesome.min.css">

        <script type="text/javascript" src="./js/demo.js" charset="utf-8"></script>
        <link rel="stylesheet" href="./css/style.css"/ type="text/css">

        <script type="text/javascript" src="./js/moment.min.js" charset="utf-8"></script>

        <script type="text/javascript">

var AAU_Group = {
    "Georgia Institute of Technology-Main Campus": true,
    "Indiana University-Bloomington": true,
    "Iowa State University": true,
    "Michigan State University": true,
    "Ohio State University-Main Campus": true,
    "Pennsylvania State University-Main Campus": true,
    "Purdue University-Main Campus": true,
    "Rutgers University-New Brunswick": true,
    "The State University of New Jersey": true, //?
    "Stony Brook University": true,//-State University of New York": true,
    "Texas A & M University-College Station": true,
    "University at Buffalo": true,//, The State University of New York": true,
    "University of Arizona": true,
    "University of California-Davis": true,
    "University of California-Berkeley": true,
    "University of California-Irvine": true,
    "University of California-Los Angeles": true,
    "University of California-San Diego": true,
    "University of California-Santa Barbara": true,
    "University of Colorado Boulder": true,
    "University of Florida": true,
    "University of Illinois at Urbana-Champaign": true,
    "University of Iowa": true,
    "University of Kansas": true,
    "University of Maryland-College Park": true,
    "University of Michigan-Ann Arbor": true,
    "University of Minnesota-Twin Cities": true,
    "University of Missouri-Columbia": true,
    "University of North Carolina at Chapel Hill": true,
    "University of Oregon": true,
    "University of Pittsburgh-Pittsburgh Campus": true,
    "The University of Texas at Austin": true,
    "University of Virginia-Main Campus": true,
    "University of Washington-Seattle Campus": true,
    "University of Wisconsin-Madison": true,
    "Boston University": true,
    "Brandeis University": true,
    "Brown University": true,
    "California Institute of Technology": true,
    "Carnegie Mellon University": true,
    "Case Western Reserve University": true,
    "Columbia University in the City of New York": true, // I guess
    "Cornell University": true,
    "Duke University": true,
    "Emory University": true,
    "Harvard University": true,
    "Johns Hopkins University": true,
    "Massachusetts Institute of Technology": true,
    "New York University": true, //?
    "Northwestern University": true,
    "Princeton University": true,
    "Rice University": true,
    "Stanford University": true,
    "Tulane University of Louisiana": true,
    "University of Chicago": true,
    "University of Pennsylvania": true,
    "University of Rochester": true,
    "University of Southern California": true,
    "Vanderbilt University": true,
    "Washington University in St Louis": true,
    "Yale University": true,
    "McGill University": true,
    "University of Toronto": true,
};

var CIC_Group = {
    "University of Chicago": true,
    "University of Illinois at Urbana-Champaign": true,
    "Indiana University-Bloomington": true,
    "University of Iowa": true,
    "University of Maryland-College Park": true,
    "University of Michigan-Ann Arbor": true,
    "Michigan State University": true,
    "University of Minnesota-Twin Cities": true,
    "University of Nebraska-Lincoln": true,
    "Northwestern University": true,
    "Ohio State University-Main Campus": true,
    "Pennsylvania State University-Main Campus": true,
    "Purdue University-Main Campus": true,
    "Rutgers University-New Brunswick": true,
    "University of Wisconsin-Madison": true
};

var ACC_Group = {
    "Boston College": true,
    "Clemson University": true,
    "Duke University": true,
    "Florida State University": true,
    "Georgia Institute of Technology-Main Campus": true,
    "University of Louisville": true,
    "University of Miami": true,
    "University of North Carolina at Chapel Hill": true,
    "North Carolina State University at Raleigh": true,
    "University of Notre Dame": true,
    "University of Pittsburgh-Pittsburgh Campus": true,
    "Syracuse University": true,
    "University of Virginia-Main Campus": true,
    "Virginia Polytechnic Institute and State University": true,
    "Wake Forest University": true,
};

var Unizin_Group = {
    "Colorado State University-Fort Collins": true,
    "Indiana University-Bloomington": true,
    "University of Florida": true,
    "University of Michigan-Ann Arbor": true,
    "Oregon State University": true,
    "University of Wisconsin-Madison": true,
    "University of Minnesota-Twin Cities": true,
    "University of Iowa": true,
    "Ohio State University-Main Campus": true,
    "Pennsylvania State University-Main Campus": true,
};


$(document).ready( function(){
	browser = new kshf.Browser({
        domID : "#chart_div",
        categoryTextWidth: 240,
        barChartWidth: 107,
        itemName: "Universities",
        source : {
            url: "https://nces.ed.gov/ipeds/datacenter/",
            dirPath: 'data/',
            fileType: 'csv',
            sheets : [ {name:"universities", id:"unitid"} ]
        },
        loadedCb: function(d){
            // Add group information to the universities
            kshf.dt.universities.forEach(function(u){
                var name = u.data['institution name'];
                u.data.Groups=[];
                if(AAU_Group[name]){ u.data.Groups.push("AAU"); }
                if(CIC_Group[name]){ u.data.Groups.push("CIC (Big 10)"); }
                if(ACC_Group[name]){ u.data.Groups.push("ACC"); }
                if(Unizin_Group[name]){ u.data.Groups.push("Unizin"); }
            })
        },
        facets: [
            {   title: "Groups", collapsed: false,
/*            },{
                title: "Institution Size", collapsed: true,
                catItemMap: function(d){
                    return d.data["HD2013.Institution size category"];
                },
            },{
                title: "Total  enrollment", collapsed: true,
                catItemMap: function(d){
                    return d.data["DRVEF2013.Total  enrollment"];
                },
                intervalScale: 'log'*/
            },{ title: "Undergraduate enrollment",
                catItemMap: function(d){ return d.data["DRVEF2013.Undergraduate enrollment"]; },
                intervalScale: 'log'
            },{ title: "Graduate enrollment",
                catItemMap: function(d){ return d.data["DRVEF2013.Graduate enrollment"]; },
                intervalScale: 'log'
            },{ title: "Institution Type",
                catItemMap: function(d){
                    switch(d.data["HD2013.Sector of institution"]){
                        case 'Public, 4-year or above': return 0;
                        case 'Private not-for-profit, 4-year or above': return 1;
                        case 'Private for-profit, 4-year or above': return 2;
                    }
                },
                catLabelText: function(d){
                    switch(d.data[0]){
                        case 0: return "Public, 4-year or above";
                        case 1: return "Private-not-for profit, 4-year or above";
                        case 2: return "Private-for profit, 4-year or above";
                    }
                },
                sortingOpts : [{ func: kshf.Util.sortFunc_Column_Int_Incr}]
            },{ title: "State", layout: "middle", collapsed: true,
                catItemMap: function(d){ return d.data["HD2013.State abbreviation"]; }
            },{ title: "Geographic region", layout: "middle", collapsed: true,
                catItemMap: function(d){ return d.data["HD2013.Geographic region"]; }
            },{ title: "Degree of urbanization", layout: "middle", collapsed: true,
                catItemMap: function(d){ return d.data["HD2013.Degree of urbanization (Urban-centric locale)"]; }
            },{ title: "Carnegie Classification 2010",
                facets: [
                    {   title: "Basic", collapsed: true,
                        catItemMap: function(d){
                            return d.data["HD2013.Carnegie Classification 2010: Basic"];
                        }
                    },{
                        title: "Size and Setting", collapsed: true,
                        catItemMap: function(d){
                            return d.data["HD2013.Carnegie Classification 2010: Size and Setting"];
                        }
                    },{
                        title: "Undergraduate Instructional Program", collapsed: true,
                        catItemMap: function(d){
                            return d.data["HD2013.Carnegie Classification 2010: Undergraduate Instructional Program"];
                        }
                    },{
                        title: "Graduate Instructional Program",collapsed: true,
                        catItemMap: function(d){
                            return d.data["HD2013.Carnegie Classification 2010: Graduate Instructional Program"];
                        }
/*                    },{
                        title: "Undergraduate Profile",
                        catItemMap: function(d){
                            return d.data["HD2013.Carnegie Classification 2010: Undergraduate Profile"];
                        }, collapsed: true
                    },{
                        title: "Enrollment Profile",
                        catItemMap: function(d){
                            return d.data["HD2013.Carnegie Classification 2010: Enrollment Profile"];
                        }, collapsed: true*/
                    }
                ]
            },{ title: "Diversity", layout: 'right',
                facets: [
                    {   title: "% American Indian/Alaska Native", collapsed: true,
                        catItemMap: function(d){
                            return d.data["DRVEF2013.Percent of total enrollment that are American Indian or Alaska Native"];
                        },
                        description: "Percent of total enrollment that are American Indian or Alaska Native",
                        intervalScale: 'log'
                    },{ title: "% Asian", collapsed: true,
                        catItemMap: function(d){
                            return d.data["DRVEF2013.Percent of total enrollment that are Asian"];
                        },
                        description: "DRVEF2013.Percent of total enrollment that are Asian",
                        intervalScale: 'log'
                    },{ title: "% Hispanic / Latino", collapsed: true,
                        catItemMap: function(d){
                            return d.data["DRVEF2013.Percent of total enrollment that are Hispanic/Latino"];
                        },
                        description: "DRVEF2013.Percent of total enrollment that are Hispanic/Latino",
                        intervalScale: 'log'
                    },{ title: "% Nativa Hawaiian / Pac. Isl.", collapsed: true,
                        catItemMap: function(d){
                            return d.data["DRVEF2013.Percent of total enrollment that are Native Hawaiian or Other Pacific Islander"];
                        },
                        description: "DRVEF2013.Percent of total enrollment that are Native Hawaiian or Other Pacific Islander",
                        intervalScale: 'log'
                    },{ title: "% Nonresident Alien", collapsed: true,
                        catItemMap: function(d){
                            return d.data["DRVEF2013.Percent of total enrollment that are Nonresident Alien"];
                        },
                        description: "DRVEF2013.Percent of total enrollment that are Nonresident Alien",
                        intervalScale: 'log'
                    },{ title: "% White",
                        catItemMap: function(d){
                            return d.data["DRVEF2013.Percent of total enrollment that are White"];
                        },
                        description: "DRVEF2013.Percent of total enrollment that are White",
                        intervalScale: 'log'
                    },{ title: "% Black / African American",
                        catItemMap: function(d){
                            return d.data["DRVEF2013.Percent of total enrollment that are Black or African American"];
                        },
                        description: "DRVEF2013.Percent of total enrollment that are Black or African American",
                        intervalScale: 'log'
                    },{ title: "% Women",
                        catItemMap: function(d){ return d.data["DRVEF2013.Percent of total enrollment that are women"]; },
                        description: "DRVEF2013.Percent of total enrollment that are women",
                        intervalScale: 'log'
                    }
                ]
            },{ title: "6 Year Graduation Rates", layout: 'right',
                facets: [
                    {   title: "% Total Cohort",
                        catItemMap: function(d){ return d.data["DRVGR2013.Graduation rate, total cohort"]; },
                        description: "DRVGR2013.Graduation rate, total cohort",
                        intervalScale: 'log', unitName: "%"
                    },{ title: "% Men",
                        catItemMap: function(d){ return d.data["DRVGR2013.Graduation rate, men"]; },
                        description: "DRVGR2013.Graduation rate, men",
                        intervalScale: 'log', collapsed: true, unitName: "%"
                    },{ title: "% Women",
                        catItemMap: function(d){ return d.data["DRVGR2013.Graduation rate, women"]; },
                        description: "DRVGR2013.Graduation rate, women",
                        intervalScale: 'log', collapsed: true, unitName: "%"
                    }
                ]
            }
        ],
        itemDisplay: {
            sortColWidth: 82,
            sortingOpts : [
                { name:'Enrollment', value: function(d){ return d.data["DRVEF2013.Total  enrollment"]; }},
                { name:'Grad. Rate', value: function(d){ return d.data["DRVGR2013.Graduation rate, total cohort"]; }},
            ],
            textSearch : "institution name",
            detailsToggle: "zoom",
            recordView : function(d){
                return d.data['institution name'];
            },
        }
    });
});
        </script>
<style>
#chart_div{
    width: 1200px;
    height: 700px;
}
</style>
    </head>
    <body>
        <div class="contents"><div id="chart_div"></div></div>

        <div id="infobox" align="center">
            <span class="fa fa-info-circle"></span>
            Data from 
            <a href="https://nces.ed.gov/ipeds/datacenter/" target='_blank'>
                Institute of Education Sciences, National Center of Education Statistics, U.S. Department of Education.</a>
            Based on 2013 records.<br>
            <b>Selected Institutions:</b>
            Offering Doctorate Degree.
            Instituion size > 1000.
            U.S. Only
            <span class="fa fa-info-circle"></span>
            </div>
    </body>
</html>