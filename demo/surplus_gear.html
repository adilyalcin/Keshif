<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<title>Military’s Surplus Gear - US</title><meta charset="utf-8">
        <script type="text/javascript" src="https://www.google.com/jsapi"></script>
        <script type="text/javascript" src="../js/jquery-1.11.1.min.js"></script>
        <script type="text/javascript" src="../js/d3.v3.js" charset="utf-8"></script>
        <script type="text/javascript" src="../keshif.js" charset="utf-8"></script>
        <script type="text/javascript" src="../js/papaparse.min.js" charset="utf-8"></script>
        <link rel="stylesheet" href="../keshif.css" type="text/css">
        <link rel="stylesheet" href="../font-awesome/css/font-awesome.min.css">

        <script type="text/javascript" src="./js/demo.js" charset="utf-8"></script>
        <link rel="stylesheet" href="./css/style.css" type="text/css">
        
        <script type="text/javascript">
$(document).ready( function() {
    browser = new kshf.Browser({
        domID: "#chart_div",
        itemName: "Counties",
        categoryTextWidth: 200,
        leftPanelLabelWidth: 160,
        source: {
            fileType: 'tsv',
            sheets : [ {name:"counties-gear", id:"CombinedName"} ],
            dirPath: 'data/',
//  http://graphics8.nytimes.com/newsgraphics/2014/08/14/police-gear/a53e059e707a5f429107eee6c2e9f77f3f5f0c2f/'
            url: "http://www.nytimes.com/interactive/2014/08/15/us/surplus-military-equipment-map.html",
        },
        facets: [
            {   facetTitle: "state",
                catLabelText: function(d){ return getStateName(d.data[1]); }
            },{ facetTitle: "Gear Category",
                catItemMap: function(d){
                    var r=[];
                    if(d.data['Armored Vehicle']>0) r.push('Received Armored Vehicles');
                    if(d.data['Casspir Armored Vehicle']>0) r.push('Received Armored Vehicles');
                    if(d.data['Other armored vehicle']>0) r.push('Received Armored Vehicles');
                    if(d.data['MRAP']>0) r.push('Received Armored Vehicles');

                    if(d.data['Helicopter']>0) r.push('Received Aircraft(s)');
                    if(d.data['Plane']>0) r.push('Received Aircraft(s)');

                    if(d.data['Grenade Launcher']>0) r.push('Received Grenade Launcher(s)');
                    if(d.data['Machine Gun']>0) r.push('Received Guns');
                    if(d.data['Pistol']>0) r.push('Received Guns');
                    if(d.data['Shotgun']>0) r.push('Received Guns');

//                    if(d.data['Night Vision']>0) r.push('Night Vision');
//                    if(d.data['Personal Armor']>0) r.push('Body Armor');

//                    if(d.data['Silence']>0) r.push('Silence');
                    return r;
                }
            },{ facetTitle: "Gear",
                catItemMap: function(d){
                    var r=[];
                    if(d.data['Armored Vehicle']>0) r.push('Armored Vehicle');
                    if(d.data['Bayonet/Knife']>0) r.push('Bayonet/Knife');
                    if(d.data['Camo']>0) r.push('Camo');
                    if(d.data['Casspir Armored Vehicle']>0) r.push('Casspir Armored Vehicle');
                    if(d.data['Grenade Launcher']>0) r.push('Grenade Launcher');
                    if(d.data['Helicopter']>0) r.push('Helicopter');
                    if(d.data['Machine Gun']>0) r.push('Machine Gun');
                    if(d.data['Magazine']>0) r.push('Magazine');
                    if(d.data['Mine Detection']>0) r.push('Mine Detection');
                    if(d.data['MRAP']>0) r.push('MRAP');
                    if(d.data['Night Vision']>0) r.push('Night Vision');
                    if(d.data['Personal Armor']>0) r.push('Personal Armor');
                    if(d.data['phon']>0) r.push('phon');
                    if(d.data['Pistol']>0) r.push('Pistol');
                    if(d.data['Plane']>0) r.push('Plane');
                    if(d.data['Robot']>0) r.push('Robot');
                    if(d.data['Shotgun']>0) r.push('Shotgun');
                    if(d.data['Silence']>0) r.push('Silence');
                    if(d.data['Other armored vehicle']>0) r.push('Other armored vehicle');
                    return r;
                }
            },{ facetTitle: "Machine Gun", layout: 'right', intervalScale: 'log',
                catItemMap: function(d){ return d.data['Machine Gun'];},
            },{ facetTitle: "Pistol", layout: 'right', intervalScale: 'log',
                catItemMap: function(d){ return d.data['Pistol'];},
            },{ facetTitle: "Magazine", layout: 'right', intervalScale: 'log',
                catItemMap: function(d){ return d.data['Magazine'];},
            },{ facetTitle: "Shotgun", layout: 'right', intervalScale: 'log',
                catItemMap: function(d){ return d.data['Shotgun'];},
            },{ facetTitle: "Armored Vehicle", layout: 'right', intervalScale: 'step',
                catItemMap: function(d){ 
                    if(d.data['Armored Vehicle']===0) return; // skip 0
                    return d.data['Armored Vehicle'];
                },
                collapsed: true
            },{ facetTitle: "Personal Armor", layout: 'right', intervalScale: 'log',
                catItemMap: function(d){ return d.data['Personal Armor'];},
                collapsed: true
            },{ facetTitle: "Night Vision", layout: 'right', intervalScale: 'log',
                catItemMap: function(d){ return d.data['Night Vision'];},
                collapsed: true
            }
        ],
        itemDisplay: {
            sortColWidth: 60,
            sortingOpts : [{ name: 'ZipCode', value: function(d){ return d.data.fips;} }],
            textSearch : 'County Name',
            detailsToggle: 'zoom',
            textSearchFunc: function(d){ return d.data.county;},
            content: "CombinedName"
        }
    });
});
        </script>
        <style>
        #chart_div {
            width: 1000px;
            height: 700px;
        }
        </style>
	</head>
    <body>
        <div class="contents"><div id="chart_div"></div></div>

        <div id="infobox" align="center">
            <span class="fa fa-info-circle"></span> This page uses data from
            <a href="http://www.nytimes.com/interactive/2014/08/15/us/surplus-military-equipment-map.html" target="_blank">Mapping the Spread of the Military’s Surplus Gear</a>, by Tom Giratikanon, Alicia Parlapiano and Jeremy White<br> Published at New York Times, 15 August 2014. Original source: Department of Defense <span class="fa fa-info-circle"></span>
            </div>
    </body>
</html>