<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<title>BART Employee Salaries</title>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <script type="text/javascript" src="../js/jquery-1.11.1.min.js"></script>
        <script type="text/javascript" src="../js/d3.3.5.5.min.js" charset="utf-8"></script>
        <script type="text/javascript" src="../keshif.js" charset="utf-8"></script>
        <script type="text/javascript" src="../js/papaparse.min.js" charset="utf-8"></script>
        <link rel="stylesheet" href="../keshif.css"/ type="text/css">
        <link rel="stylesheet" href="../font-awesome/css/font-awesome.min.css">

        <script type="text/javascript" src="./js/demo.js" charset="utf-8"></script>
        <link rel="stylesheet" href="./css/style.css"/ type="text/css">

        <script type="text/javascript">
$(document).ready( function() {
    resizeBrowser(230,60);
    $(window).resize(function() {
        resizeBrowser(230,60);
        browser.updateLayout();
    });

    browser = new kshf.Browser({
        domID: "#chart_div",
        barChartWidth: 80,
        leftPanelLabelWidth: 200,
        rightPanelLabelWidth: 250,
        itemName: "BART Employees",
        source: {
            url: "http://blog.vctr.me/bart/",
            dirPath: './data/',
            fileType: 'csv',
            sheets : [ {name:"bart-comp-all"} ]
        },
        facets: [
            {   title: "Job Family"
            },{ title: "Union"
            },{ title: "Title"
            },{ title: "Total Salary", attribMap: "TCOE", unitName: '$', layout: 'right'
            },{ title: "Base Salary", unitName: '$', layout: 'right'
            },{ title: "Overtime Salary", attribMap: "OT", unitName: '$', layout: 'right'
            },{ title: "Other Salary", unitName: '$', layout: 'right'
            },{ title: "Medical + Dental + Vision", attribMap: "MDV", unitName: '$', layout: 'right'
            },{ title: "ER (Salary)", attribMap: 'ER', layout: 'right', collapsed: true,  unitName: '$'
            },{ title: "EE (Salary)", attribMap: 'EE', layout: 'right', collapsed: true,  unitName: '$'
            },{ title: "DC (Salary)", attribMap: 'DC', layout: 'right', collapsed: true,  unitName: '$',
                intervalScale: 'log'
            },{ title: "Source", layout: 'right'
            }
        ],
        itemDisplay: {
            sortColWidth: 70,
            detailsToggle : "Zoom",
            sortingOpts : [
                {name: 'Total', value: function(d){ return d.data.TCOE;}},
                {name: 'Base'},
            ],
            textSearch: "Name",
            recordView: function(d){ return d.data.Name + " <span class='empTitle'>" +d.data.Title+"</span>"; }
        }
    });
});
        </script>
        <style>
            .empTitle{
                display:inline-block;
                font-size: 0.8em;
                color: gray;
            }
            .empTitle:before{
                content: " - ";
            }
            .listsortcolumn > .columnLabel:after{
                content: "$";
                color: gray;
                margin-left: 3px;
                font-size: 0.9em;
            }
        </style>
    </head>
    <body>
        <div class="contents"><div id="chart_div"></div></div>
    </body>
</html>